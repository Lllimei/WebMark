{% extends 'base.html' %}

{% load render_table from django_tables2 %}
{% load bootstrap4 %}

{% block title %}Main page{% endblock %}

{% block content %}

{% if filter %}
<form action="" method="get" name="filterForm" class="form form-inline"
    onchange="document.getElementsByName('filterForm')[0].submit();">
    {% bootstrap_form filter.form layout='inline' %}
</form>
{% endif %}

{% render_table table 'django_tables2/bootstrap4.html' %}
<a id="compare" href="/" class="btn btn-primary">Compare</a>
<script>
    var ind;
    var elements = document.getElementsByTagName("TR");
    var first = 0;
    var second = 0;
    var checked = 0;
    // This need a system for determining whether both have been selected
    // If so, the unchecking must be done in a way that does not
    // give false input
    for (ind = 0; ind < elements.length; ind++) {
        elements[ind].addEventListener("click", function () {

            if (second == 0 && first != 0) {
                second = this.id;
                checked = 1;
            }
            if (first == 0) {
                first = this.id;
            }
            var btn = document.getElementById("compare");
            btn.href = "/compare/" + first + "/" + second;
        }, { passive: true });
    }


</script>
{% endblock %}